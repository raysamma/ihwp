<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayurvedic Health Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2E7D32;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            color: #666;
            font-size: 1.2rem;
        }

        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(45deg, #2E7D32, #4CAF50);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3);
            text-decoration: none;
            display: inline-block;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(46, 125, 50, 0.4);
            background: linear-gradient(45deg, #1B5E20, #2E7D32);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #FF8F00, #FFB74D);
            box-shadow: 0 4px 15px rgba(255, 143, 0, 0.3);
        }

        .content-area {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            min-height: 500px;
            overflow: hidden; /* To contain floated elements and margins */
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Adjusted minmax */
            gap: 30px;
            margin: 30px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-color: #2E7D32;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #2E7D32;
        }

        .feature-card h3 {
            color: #2E7D32;
            font-size: 1.5rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .feature-card p {
            color: #666;
            line-height: 1.6;
        }

        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2E7D32;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2E7D32;
        }

        .btn-primary {
            background: linear-gradient(45deg, #2E7D32, #4CAF50);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3);
            display: block; /* Make button block */
            width: 100%; /* Make button full width */
            margin-top: 20px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(46, 125, 50, 0.4);
        }

        .hidden {
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 20px 0 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #2E7D32, #4CAF50);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%; /* Start at 0 */
        }

        .question-card {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #2E7D32;
        }

        .question-options {
            margin: 20px 0;
        }

        .option-btn {
            display: block;
            width: 100%;
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px 20px;
            margin: 10px 0;
            border-radius: 10px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            border-color: #2E7D32;
            background: #f0f8f0;
        }

        .option-btn.selected {
            border-color: #2E7D32;
            background: #e8f5e8;
            color: #2E7D32;
            font-weight: 500;
        }

        .quiz-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #555;
            padding: 12px 30px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-secondary:disabled {
            background: #f9f9f9;
            color: #aaa;
            cursor: not-allowed;
        }

        /* Schedule Page Styles */
        .schedule-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .schedule-item {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #FF8F00;
        }

        .schedule-time {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2E7D32;
            flex-basis: 150px;
            flex-shrink: 0;
        }

        .schedule-details h4 {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 8px;
        }

        .schedule-details p {
            font-size: 1rem;
            color: #666;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .nav-menu {
                flex-direction: column;
                align-items: center;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .content-area {
                padding: 20px;
            }

            .schedule-item {
                flex-direction: column;
                gap: 10px;
            }

            .schedule-time {
                flex-basis: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåø Ayurvedic Health Assessment</h1>
            <p>Discover Your Unique Prakriti Constitution</p>
        </div>

        <div class="nav-menu">
            <button class="nav-btn active" onclick="showPage('home', event)">üè† Home</button>
            <button class="nav-btn" onclick="showPage('profile', event)">üë§ Profile</button>
            <button class="nav-btn" onclick="showPage('analysis', event)">üìä Analysis</button>
            <button class="nav-btn" onclick="showPage('dashboard', event)">üìà Dashboard</button>
            <button class="nav-btn" onclick="showPage('schedule', event)">üìÖ Daily Schedule</button> <!-- New Button -->
        </div>

        <div class="content-area">
            <!-- Home Page -->
            <div id="home-page" class="page">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h2 style="color: #2E7D32; font-size: 2rem; margin-bottom: 20px;">Welcome to Your Ayurvedic Journey</h2>
                    <p style="font-size: 1.2rem; color: #666; max-width: 800px; margin: 0 auto; line-height: 1.6;">
                        Understand your unique Prakriti (Vata, Pitta, Kapha) through our comprehensive assessment 
                        and receive personalized health recommendations based on ancient Ayurvedic wisdom.
                    </p>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" onclick="showPage('profile', event)">
                        <div class="feature-icon">üë§</div>
                        <h3>Personal Profile</h3>
                        <p>Create your detailed health profile with personal information and health history for accurate analysis.</p>
                    </div>
                    <div class="feature-card" onclick="showPage('analysis', event)">
                        <div class="feature-icon">üìä</div>
                        <h3>Prakriti Analysis</h3>
                        <p>Take our comprehensive questionnaire to discover your unique Ayurvedic constitution and dosha balance.</p>
                    </div>
                    <div class="feature-card" onclick="showPage('dashboard', event)">
                        <div class="feature-icon">üìà</div>
                        <h3>Health Dashboard</h3>
                        <p>View your results, track progress, and get personalized recommendations for optimal health.</p>
                    </div>
                    <!-- New Feature Card -->
                    <div class="feature-card" onclick="showPage('schedule', event)">
                        <div class="feature-icon">üìÖ</div>
                        <h3>Daily Schedule</h3>
                        <p>Explore the ideal Ayurvedic daily routine (Dinacharya) to balance your doshas and enhance well-being.</p>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, #2E7D32, #4CAF50); color: white; padding: 40px; border-radius: 15px; text-align: center; margin-top: 40px;">
                    <h3 style="font-size: 1.8rem; margin-bottom: 20px;">About Ayurvedic Constitution</h3>
                    <p style="font-size: 1.1rem; line-height: 1.7; max-width: 800px; margin: 0 auto;">
                        Ayurveda recognizes three fundamental energies or doshas: <strong>Vata</strong> (air & space), 
                        <strong>Pitta</strong> (fire & water), and <strong>Kapha</strong> (earth & water). Your unique combination 
                        of these doshas determines your Prakriti - your natural constitution that influences your 
                        physical, mental, and emotional characteristics.
                    </p>
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profile-page" class="page hidden">
                <h2 style="color: #2E7D32; text-align: center; margin-bottom: 30px;">Personal Health Profile</h2>
                <div class="form-container">
                    <form id="profile-form">
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="age">Age</label>
                            <input type="number" id="age" name="age" min="1">
                        </div>
                         <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender" name="gender">
                                <option value="">Select...</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                                <option value="prefer_not_to_say">Prefer not to say</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="concerns">Main Health Concerns</label>
                            <textarea id="concerns" name="concerns" rows="4" placeholder="e.g., Digestion, Sleep, Stress..."></textarea>
                        </div>
                        <button type="submit" class="btn-primary">Save Profile</button>
                    </form>
                </div>
            </div>

            <!-- Analysis Page -->
            <div id="analysis-page" class="page hidden">
                <h2 style="color: #2E7D32; text-align: center; margin-bottom: 20px;">Prakriti Analysis Questionnaire</h2>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>

                <div id="quiz-container">
                    <!-- Questions will be dynamically injected here by JavaScript -->
                </div>

                <div class="quiz-nav">
                    <button id="prev-btn" class="btn-secondary" onclick="prevQuestion()" disabled>Previous</button>
                    <button id="next-btn" class="btn-secondary" onclick="nextQuestion()">Next</button>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page hidden">
                <h2 style="color: #2E7D32; text-align: center; margin-bottom: 30px;">Your Health Dashboard</h2>
                <div id="results-container" style="text-align: center;">
                    <p style="font-size: 1.2rem; color: #666;">Your analysis results will appear here once you complete the questionnaire.</p>
                    <!-- Example of what results might look like -->
                    <!-- 
                    <h3>Your Prakriti: Vata-Pitta</h3>
                    <p>Vata: 60%, Pitta: 30%, Kapha: 10%</p>
                    <h4>Recommendations:</h4>
                    <ul>
                        <li>Focus on warm, cooked foods.</li>
                        <li>Maintain a regular routine.</li>
                        <li>Practice calming meditation.</li>
                    </ul>
                    -->
                </div>
            </div>

            <!-- Daily Schedule Page (New) -->
            <div id="schedule-page" class="page hidden">
                <h2 style="color: #2E7D32; text-align: center; margin-bottom: 40px;">Ayurvedic Daily Schedule (Dinacharya)</h2>
                <div class="schedule-container">
                    <div class="schedule-item">
                        <div class="schedule-time">4:30 - 6:00 AM</div>
                        <div class="schedule-details">
                            <h4>Wake Up (Brahma Muhurta)</h4>
                            <p>Wake during the "time of creation." This is the most peaceful and pure time of day, ideal for meditation and absorbing positive energy.</p>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">6:00 AM</div>
                        <div class="schedule-details">
                            <h4>Cleansing</h4>
                            <p>Cleanse the sense organs. Scrape your tongue, brush teeth, and practice oil pulling (gargling with sesame oil) to remove toxins.</p>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">6:15 AM</div>
                        <div class="schedule-details">
                            <h4>Drink Warm Water</h4>
                            <p>Sip a glass of warm water (plain or with lemon) to hydrate tissues and gently stimulate the digestive tract.</p>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">6:30 - 7:00 AM</div>
                        <div class="schedule-details">
                            <h4>Movement & Meditation</h4>
                            <p>Engage in light exercise like yoga (Surya Namaskar) or a gentle walk. Follow with 15-20 minutes of meditation or mindfulness.</p>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">7:30 - 8:00 AM</div>
                        <div class="schedule-details">
                            <h4>Abhyanga (Self-Massage)</h4>
                            <p>Perform a self-massage with warm oil (sesame for Vata/Kapha, coconut for Pitta) before bathing to nourish the skin and calm the nerves.</p>
                        </div>
                    </div>
                     <div class="schedule-item">
                        <div class="schedule-time">8:00 - 9:00 AM</div>
                        <div class="schedule-details">
                            <h4>Breakfast</h4>
                            <p>Eat a light, warm, and nourishing breakfast. This should be a smaller meal than lunch.</p>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">12:00 - 1:00 PM</div>
                        <div class="schedule-details">
                            <h4>Lunch (Main Meal)</h4>
                            <p>Eat your largest meal of the day when digestive fire (agni) is strongest. Favor fresh, whole foods.</p>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">6:00 - 7:00 PM</div>
                        <div class="schedule-details">
                            <h4>Dinner</h4>
                            <p>Eat a light, warm, and easily digestible dinner at least 3 hours before sleep. Soup or kitchari is ideal.</p>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">9:00 - 10:00 PM</div>
                        <div class="schedule-details">
                            <h4>Wind Down</h4>
                            <p>Disconnect from screens. Read a book, listen to calming music, or drink a cup of herbal tea (like chamomile or ashwagandha).</p>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">10:00 - 10:30 PM</div>
                        <div class="schedule-details">
                            <h4>Sleep</h4>
                            <p>Aim to be in bed by 10:00 PM. This allows the body to enter its natural pitta-time cleansing and restoration cycle.</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- Page Navigation ---
        function showPage(pageId, event) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.add('hidden'));

            // Show the selected page
            const activePage = document.getElementById(pageId + '-page');
            if (activePage) {
                activePage.classList.remove('hidden');
            }

            // Update active state for nav buttons
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => btn.classList.remove('active'));
            if (event) {
                event.currentTarget.classList.add('active');
            } else {
                // If called without an event (e.g., on quiz completion), find matching button
                document.querySelector(`.nav-btn[onclick="showPage('${pageId}', event)"]`).classList.add('active');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // --- Profile Form Handling ---
        document.getElementById('profile-form').addEventListener('submit', function(e) {
            e.preventDefault();
            // In a real app, you'd save this data
            const formData = new FormData(this);
            console.log('Profile Saved:');
            for (let [key, value] of formData.entries()) {
                console.log(key, ':', value);
            }
            // Show a confirmation (using a custom modal in a real app)
            alert('Profile saved successfully!'); 
            // We are using alert here as a placeholder.
            // In a real app, replace with a custom modal.
        });


        // --- Analysis Quiz Logic ---
        const quizQuestions = [
            {
                question: "What is your typical body frame?",
                options: [
                    { text: "Thin, light frame, bony", vata: 3, pitta: 0, kapha: 0 },
                    { text: "Medium, muscular frame", vata: 0, pitta: 3, kapha: 0 },
                    { text: "Large, heavy frame, well-built", vata: 0, pitta: 0, kapha: 3 }
                ]
            },
            {
                question: "How is your skin?",
                options: [
                    { text: "Dry, thin, tans easily", vata: 3, pitta: 0, kapha: 0 },
                    { text: "Sensitive, oily, prone to rashes/acne", vata: 0, pitta: 3, kapha: 0 },
                    { text: "Thick, oily, cool, smooth", vata: 0, pitta: 0, kapha: 3 }
                ]
            },
            {
                question: "What is your hair like?",
                options: [
                    { text: "Dry, thin, brittle", vata: 3, pitta: 0, kapha: 0 },
                    { text: "Fine, oily, may gray early", vata: 0, pitta: 3, kapha: 0 },
                    { text: "Thick, oily, wavy", vata: 0, pitta: 0, kapha: 3 }
                ]
            },
            {
                question: "How is your appetite?",
                options: [
                    { text: "Irregular, variable", vata: 3, pitta: 0, kapha: 0 },
                    { text: "Strong, sharp, get irritable if I miss a meal", vata: 0, pitta: 3, kapha: 0 },
                    { text: "Slow but steady, can skip meals easily", vata: 0, pitta: 0, kapha: 3 }
                ]
            },
            {
                question: "How is your sleep pattern?",
                options: [
                    { text: "Light, interrupted, prone to insomnia", vata: 3, pitta: 0, kapha: 0 },
                    { text: "Moderate, sound, can wake up hot", vata: 0, pitta: 3, kapha: 0 },
                    { text: "Deep, long, hard to wake up", vata: 0, pitta: 0, kapha: 3 }
                ]
            }
            // Add more questions for a full assessment
        ];

        let currentQuestion = 0;
        let userAnswers = {}; // Store answers { qIndex: { vata, pitta, kapha } }
        const quizContainer = document.getElementById('quiz-container');
        const progressFill = document.getElementById('progress-fill');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');

        function loadQuestion(qIndex) {
            quizContainer.innerHTML = ''; // Clear previous
            const q = quizQuestions[qIndex];
            
            const card = document.createElement('div');
            card.className = 'question-card';
            
            const questionText = document.createElement('h3');
            questionText.style.marginBottom = '20px';
            questionText.textContent = `Q${qIndex + 1}: ${q.question}`;
            card.appendChild(questionText);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'question-options';

            q.options.forEach((option, oIndex) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option.text;
                btn.onclick = () => selectAnswer(qIndex, oIndex, btn);
                
                // Check if this answer was previously selected
                if (userAnswers[qIndex] && userAnswers[qIndex].text === option.text) {
                    btn.classList.add('selected');
                }

                optionsDiv.appendChild(btn);
            });

            card.appendChild(optionsDiv);
            quizContainer.appendChild(card);
            
            updateProgress();
            updateNavButtons();
        }

        function selectAnswer(qIndex, oIndex, btnEl) {
            const selectedOption = quizQuestions[qIndex].options[oIndex];
            userAnswers[qIndex] = {
                vata: selectedOption.vata,
                pitta: selectedOption.pitta,
                kapha: selectedOption.kapha,
                text: selectedOption.text // For re-populating
            };

            // Update visual selection
            const allOptions = btnEl.parentElement.querySelectorAll('.option-btn');
            allOptions.forEach(btn => btn.classList.remove('selected'));
            btnEl.classList.add('selected');

            // Automatically move to next question after a brief delay
            setTimeout(() => {
                nextQuestion();
            }, 300);
        }

        function nextQuestion() {
            if (currentQuestion < quizQuestions.length - 1) {
                currentQuestion++;
                loadQuestion(currentQuestion);
            } else if (currentQuestion === quizQuestions.length - 1) {
                // Last question, change Next to Finish
                finishQuiz();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion(currentQuestion);
            }
        }

        function updateProgress() {
            const progressPercent = ((currentQuestion + 1) / quizQuestions.length) * 100;
            progressFill.style.width = `${progressPercent}%`;
        }
        
        function updateNavButtons() {
            prevBtn.disabled = (currentQuestion === 0);
            nextBtn.textContent = (currentQuestion === quizQuestions.length - 1) ? 'Finish Assessment' : 'Next';
        }

        function finishQuiz() {
            let totalVata = 0;
            let totalPitta = 0;
            let totalKapha = 0;

            for (let i = 0; i < quizQuestions.length; i++) {
                if (userAnswers[i]) {
                    totalVata += userAnswers[i].vata;
                    totalPitta += userAnswers[i].pitta;
                    totalKapha += userAnswers[i].kapha;
                }
            }
            
            const totalDosha = totalVata + totalPitta + totalKapha;
            const vataPercent = Math.round((totalVata / totalDosha) * 100) || 0;
            const pittaPercent = Math.round((totalPitta / totalDosha) * 100) || 0;
            const kaphaPercent = Math.round((totalKapha / totalDosha) * 100) || 0;

            // Simple logic to find primary and secondary dosha
            const doshas = [
                { name: 'Vata', score: vataPercent },
                { name: 'Pitta', score: pittaPercent },
                { name: 'Kapha', score: kaphaPercent }
            ];
            
            // Sort by score descending
            doshas.sort((a, b) => b.score - a.score);

            let primaryDosha = doshas[0].name;
            let secondaryDosha = doshas[1].score > 10 ? doshas[1].name : null; // Only show if significant
            
            let prakriti = primaryDosha;
            if (secondaryDosha && Math.abs(doshas[0].score - doshas[1].score) < 20) { // Bi-doshic
                prakriti = `${primaryDosha}-${secondaryDosha}`;
            }
            if (Math.abs(doshas[0].score - doshas[1].score) < 10 && Math.abs(doshas[1].score - doshas[2].score) < 10) { // Tri-doshic
                prakriti = 'Vata-Pitta-Kapha';
            }

            // Display results on Dashboard
            const resultsContainer = document.getElementById('results-container');
            resultsContainer.innerHTML = `
                <h3 style="font-size: 1.8rem; color: #2E7D32; margin-bottom: 20px;">Your Prakriti: ${prakriti}</h3>
                <div style="max-width: 400px; margin: 0 auto; background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <p style="font-size: 1.2rem; margin: 10px 0;"><strong>Vata:</strong> ${vataPercent}%</p>
                    <p style="font-size: 1.2rem; margin: 10px 0;"><strong>Pitta:</strong> ${pittaPercent}%</p>
                    <p style="font-size: 1.2rem; margin: 10px 0;"><strong>Kapha:</strong> ${kaphaPercent}%</p>
                </div>
                <div style="text-align: left; max-width: 600px; margin: 30px auto; line-height: 1.7;">
                    <h4 style="color: #2E7D32; font-size: 1.4rem; margin-bottom: 15px;">Personalized Recommendations:</h4>
                    ${getRecommendations(prakriti)}
                </div>
            `;
            
            // Navigate to dashboard
            showPage('dashboard');
        }

        function getRecommendations(prakriti) {
            let recs = '<ul style="list-style-position: inside; padding-left: 10px;">';
            if (prakriti.includes('Vata')) {
                recs += '<li>Focus on warm, cooked foods and avoid cold, raw foods.</li>';
                recs += '<li>Maintain a regular daily routine, especially for meals and sleep.</li>';
                recs += '<li>Practice calming activities like meditation and gentle yoga.</li>';
            }
            if (prakriti.includes('Pitta')) {
                recs += '<li>Favor cool, refreshing foods and avoid spicy, fried, or sour foods.</li>';
                recs += '<li>Balance activity with relaxation; avoid overworking.</li>';
                recs += '<li>Spend time in nature and practice cooling breathwork (e.g., Shitali).</li>';
            }
            if (prakriti.includes('Kapha')) {
                recs += '<li>Eat light, warm, and dry foods; avoid heavy, oily, and cold foods.</li>';
                recs += '<li>Stay active with vigorous, regular exercise.</li>';
                recs += '<li>Wake up early (before 6 AM) and avoid daytime naps.</li>';
            }
            recs += '</ul><p style="margin-top: 20px;"><strong>Note:</strong> These are general guidelines. For a complete assessment, please consult a qualified Ayurvedic practitioner.</p>';
            return recs;
        }


        // Load the home page and first question on script load
        document.addEventListener('DOMContentLoaded', () => {
            showPage('home');
            loadQuestion(0); // Pre-load first question for analysis page
        });

    </script>
</body>
</html>
